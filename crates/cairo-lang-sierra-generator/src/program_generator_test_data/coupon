//! > Unused coupon

//! > test_runner_name
test_program_generator

//! > cairo
extern fn coupon_buy<T>() -> T nopanic;
extern fn coupon_refund<T>(c: T) nopanic;
extern fn drop<T>(c: T) nopanic;

struct MyStruct {
    c: bar::<u8>::Coupon,
    box: Box::<bar::<u8>::Coupon>,
}

fn foo(my_struct: MyStruct, coupon: bar::<u8>::Coupon) -> (MyStruct, bar::<u8>::Coupon) {
    coupon_refund(my_struct.c);
    coupon_refund(my_struct.box.unbox());
    drop(coupon);
    (MyStruct{ c: coupon_buy(), box: BoxTrait::new(coupon_buy()) }, coupon_buy())
}

fn bar<T>() -> felt252 {
    10
}

//! > sierra_code
type Unit = Struct<ut@Tuple> [storable: true, drop: true, dup: true, zero_sized: true];
type Coupon<user@test::bar::<core::integer::u8>> = Coupon<user@test::bar::<core::integer::u8>> [storable: true, drop: true, dup: false, zero_sized: true];
type Box<Coupon<user@test::bar::<core::integer::u8>>> = Box<Coupon<user@test::bar::<core::integer::u8>>> [storable: true, drop: true, dup: false, zero_sized: false];
type test::MyStruct = Struct<ut@test::MyStruct, Coupon<user@test::bar::<core::integer::u8>>, Box<Coupon<user@test::bar::<core::integer::u8>>>> [storable: true, drop: true, dup: false, zero_sized: false];
type Tuple<test::MyStruct, Coupon<user@test::bar::<core::integer::u8>>> = Struct<ut@Tuple, test::MyStruct, Coupon<user@test::bar::<core::integer::u8>>> [storable: true, drop: true, dup: false, zero_sized: false];
type Box<Unit> = Box<Unit> [storable: true, drop: true, dup: true, zero_sized: false];

libfunc struct_deconstruct<test::MyStruct> = struct_deconstruct<test::MyStruct>;
libfunc drop<Unit> = drop<Unit>;
libfunc unbox<Unit> = unbox<Unit>;
libfunc struct_construct<Unit> = struct_construct<Unit>;
libfunc into_box<Unit> = into_box<Unit>;
libfunc struct_construct<test::MyStruct> = struct_construct<test::MyStruct>;
libfunc struct_construct<Tuple<test::MyStruct, Coupon<user@test::bar::<core::integer::u8>>>> = struct_construct<Tuple<test::MyStruct, Coupon<user@test::bar::<core::integer::u8>>>>;

struct_deconstruct<test::MyStruct>([0]) -> ([2], [3]); // 0
drop<Unit>([2]) -> (); // 1
unbox<Unit>([3]) -> ([4]); // 2
drop<Unit>([4]) -> (); // 3
drop<Unit>([1]) -> (); // 4
struct_construct<Unit>() -> ([5]); // 5
struct_construct<Unit>() -> ([6]); // 6
into_box<Unit>([6]) -> ([7]); // 7
struct_construct<Unit>() -> ([8]); // 8
struct_construct<test::MyStruct>([5], [7]) -> ([9]); // 9
struct_construct<Tuple<test::MyStruct, Coupon<user@test::bar::<core::integer::u8>>>>([9], [8]) -> ([10]); // 10
return([10]); // 11

test::foo@0([0]: test::MyStruct, [1]: Coupon<user@test::bar::<core::integer::u8>>) -> (Tuple<test::MyStruct, Coupon<user@test::bar::<core::integer::u8>>>);
